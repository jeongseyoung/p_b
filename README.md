ìœ ë‹ˆí¬í‚¤ ì„¤ì • - ì¤‘ë³µë°©ì§€ë¥¼ dbì—ì„œ ì§ì ‘
ALTER TABLE user ADD CONSTRAINT unique_key_userId UNIQUE (userId);
ALTER TABLE user ADD CONSTRAINT unique_key_userEmail UNIQUE (userEmail);

JWT í† í°ì„ ë°›ì„ ìµœì¢… í˜ì´ì§€
app:
  oauth2:
    redirect-uri: http://localhost:8098/oauth2/redirect


OAuth ì‹¤íŒ¨ ì‹œ ì „ë‹¬ë˜ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ì—
URL ê·œê²©ì— ë§ì§€ ì•ŠëŠ” ë¬¸ìê°€ í¬í•¨ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ
ì—ëŸ¬ ì½”ë“œëŠ” ë‹¨ìˆœí™”í•˜ê±°ë‚˜ ë°˜ë“œì‹œ URL ì¸ì½”ë”©í•œë‹¤
(http://localhost:8098/oauth2/redirect/login_failed?error=[invaild_request]  -> [] ì‚¬ìš©ëª»í•¨, ê·œê²©ì— ë§ì§€ ì•ŠìŒ)


ì „ì²´ í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨
[ì‚¬ìš©ì]
   â”‚
   â”‚ 1. í´ë¦­: http://localhost:8098/oauth2/authorize/google
   â†“
[Spring Security]
   â”‚
   â”‚ 2. ë¦¬ë‹¤ì´ë ‰íŠ¸
   â†“
[Google ë¡œê·¸ì¸ í˜ì´ì§€]
   â”‚
   â”‚ 3. ë¡œê·¸ì¸ + ê¶Œí•œ ìŠ¹ì¸
   â†“
[Google ì„œë²„]
   â”‚
   â”‚ 4. ì½œë°±: http://localhost:8098/login/oauth2/code/google?code=xxxxx
   â†“
[Spring Security]
   â”‚
   â”‚ 5. codeë¡œ access_token êµí™˜
   â”‚ 6. CustomUserService.loadUser() ì‹¤í–‰
   â”‚ 7. ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
   â”‚ 8. DB ì €ì¥/ì—…ë°ì´íŠ¸
   â†“
[OAuth2AuthenticationSuccessHandler]
   â”‚
   â”‚ 9. JWT í† í° ìƒì„±
   â”‚ 10. ë¦¬ë‹¤ì´ë ‰íŠ¸: http://localhost:8098/oauth2/redirect?accessToken=xxx
   â†“
[í”„ë¡ íŠ¸ì—”ë“œ/ì‚¬ìš©ì]

 OAuth2 ë¡œê·¸ì¸ ì „ì²´ í”Œë¡œìš° (ì„±ê³µ & ì‹¤íŒ¨)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           [ì‚¬ìš©ì]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚ 1. í´ë¦­: http://localhost:8098/oauth2/authorize/google
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      [Spring Security]                                â”‚
â”‚  - OAuth2 ìš”ì²­ ìƒì„± (client_id, scope, redirect_uri ë“±)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚ 2. ë¦¬ë‹¤ì´ë ‰íŠ¸ â†’ https://accounts.google.com/o/oauth2/v2/auth?...
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     [Google ë¡œê·¸ì¸ í˜ì´ì§€]                            â”‚
â”‚  - ê³„ì • ì„ íƒ                                                          â”‚
â”‚  - ë¹„ë°€ë²ˆí˜¸ ì…ë ¥                                                      â”‚
â”‚  - ê¶Œí•œ ìŠ¹ì¸ í™”ë©´                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚ 3. ì‚¬ìš©ì í–‰ë™
   â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚               â”‚                            â”‚
   âœ… ìŠ¹ì¸         âŒ ê±°ë¶€/ì·¨ì†Œ                ğŸš« ì—ëŸ¬
   â”‚               â”‚                            â”‚
   â†“               â†“                            â†“

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         âœ… ì„±ê³µ í”Œë¡œìš°
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        [Google ì„œë²„]                                  â”‚
â”‚  - ì¸ì¦ ì½”ë“œ(code) ìƒì„±                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚ 4. ì½œë°±: http://localhost:8098/login/oauth2/code/google
   â”‚         ?code=4/0AanRRrv...&state=xyz
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      [Spring Security]                                â”‚
â”‚  - codeë¡œ access_token êµí™˜ ìš”ì²­                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                                             â”‚
   âœ… Token êµí™˜ ì„±ê³µ                                  ğŸš« Token êµí™˜ ì‹¤íŒ¨
   â”‚                                                             â”‚
   â†“                                                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [CustomUserService.loadUser()]   â”‚          â”‚  OAuth2AuthenticationExceptionâ”‚
â”‚  - Google API í˜¸ì¶œ                â”‚          â”‚  - Invalid code              â”‚
â”‚  - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°            â”‚          â”‚  - Expired code              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  - Network error             â”‚
   â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ 5. ì‚¬ìš©ì ì •ë³´ ìˆ˜ì‹                                   â”‚
   â”‚    {email, name, sub, picture}                      â”‚
   â†“                                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  [DB ì²˜ë¦¬]                         â”‚                    â”‚
â”‚  - userMapper.findByEmail()       â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
   â”‚                                                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
   â”‚                   â”‚                 â”‚              â”‚
   ê¸°ì¡´ ì‚¬ìš©ì         ì‹ ê·œ ì‚¬ìš©ì       DB ì˜¤ë¥˜         â”‚
   â”‚                   â”‚                 â”‚              â”‚
   â†“                   â†“                 â†“              â”‚
 âœ… ì¡°íšŒ ì„±ê³µ      âœ… INSERT ì„±ê³µ    ğŸš« DB ì‹¤íŒ¨        â”‚
   â”‚                   â”‚                 â”‚              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚              â”‚
             â”‚                           â”‚              â”‚
             â†“                           â†“              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  [UserItem ìƒì„±]             â”‚    â”‚ SQLException   â”‚  â”‚
â”‚  - OAuth2User êµ¬í˜„           â”‚    â”‚ Constraint     â”‚  â”‚
â”‚  - attributes ì„¤ì •           â”‚    â”‚ violation      â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                                      â”‚              â”‚
   â”‚ 6. return UserItem                   â”‚              â”‚
   â†“                                      â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚
â”‚ [OAuth2AuthenticationSuccessHandler.java]â”‚  â”‚              â”‚
â”‚  - JWT í† í° ìƒì„±                     â”‚  â”‚              â”‚
â”‚    * accessToken                     â”‚  â”‚              â”‚
â”‚    * refreshToken                    â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚
   â”‚                                      â”‚              â”‚
   â”‚ 7. ë¦¬ë‹¤ì´ë ‰íŠ¸                         â”‚              â”‚
   â†“                                      â†“              â†“
http://localhost:8098/oauth2/redirect    â”‚              â”‚
?accessToken=eyJhbGc...                   â”‚              â”‚
&refreshToken=eyJhbGc...                  â”‚              â”‚
   â”‚                                      â”‚              â”‚
   â†“                                      â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚              â”‚
â”‚  [í”„ë¡ íŠ¸ì—”ë“œ/ì‚¬ìš©ì]       â”‚            â”‚              â”‚
â”‚  âœ… ë¡œê·¸ì¸ ì„±ê³µ!           â”‚            â”‚              â”‚
â”‚  - Token ì €ì¥             â”‚            â”‚              â”‚
â”‚  - ë©”ì¸ í˜ì´ì§€ ì´ë™        â”‚            â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚              â”‚
                                          â”‚              â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    âŒ ì‹¤íŒ¨ í”Œë¡œìš°ë“¤
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                          â”‚              â”‚
                                          â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       [OAuth2AuthenticationFailureHandler.java]              â”‚
â”‚  - ì—ëŸ¬ ë©”ì‹œì§€ ë¡œê¹…                                      â”‚
â”‚  - ì‹¤íŒ¨ ì‚¬ìœ  ê¸°ë¡                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ 8. ì—ëŸ¬ ë¦¬ë‹¤ì´ë ‰íŠ¸
                          â†“
        http://localhost:8098/oauth2/redirect
        ?error=User+registration+failed
                          â”‚
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              [í”„ë¡ íŠ¸ì—”ë“œ/ì‚¬ìš©ì]                          â”‚
â”‚  âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨                                          â”‚
â”‚  - ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ                                       â”‚
â”‚  - ì¬ì‹œë„ ë²„íŠ¼ ì œê³µ                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          âŒ ì‚¬ìš©ìê°€ ê¶Œí•œ ê±°ë¶€/ì·¨ì†Œí•œ ê²½ìš°
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    [Google ì„œë²„]                          â”‚
â”‚  - error=access_denied ë°˜í™˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚ 4. ì—ëŸ¬ ì½œë°±: http://localhost:8098/login/oauth2/code/google
   â”‚              ?error=access_denied
   â”‚              &error_description=User+denied+access
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              [Spring Security]                           â”‚
â”‚  - OAuth2AuthenticationException ë°œìƒ                    â”‚
â”‚  - "User denied access" ë©”ì‹œì§€                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       [OAuth2AuthenticationFailureHandler]              â”‚
â”‚  - log.error("OAuth2 authentication failed")           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚ 5. ë¦¬ë‹¤ì´ë ‰íŠ¸
   â†“
http://localhost:8098/oauth2/redirect
?error=access_denied
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              [í”„ë¡ íŠ¸ì—”ë“œ/ì‚¬ìš©ì]                          â”‚
â”‚  âŒ "ë¡œê·¸ì¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤"                             â”‚
â”‚  - ë‹¤ì‹œ ì‹œë„ ë²„íŠ¼                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              ğŸš« ê¸°íƒ€ ì—ëŸ¬ ì¼€ì´ìŠ¤ë“¤
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. redirect_uri_mismatch                                 â”‚
â”‚    â†’ Google Console ì„¤ì • í™•ì¸                             â”‚
â”‚                                                          â”‚
â”‚ 2. invalid_client                                        â”‚
â”‚    â†’ client_id, client_secret í™•ì¸                       â”‚
â”‚                                                          â”‚
â”‚ 3. Network timeout                                       â”‚
â”‚    â†’ Google API ì—°ê²° ì‹¤íŒ¨                                â”‚
â”‚                                                          â”‚
â”‚ 4. Database connection failed                            â”‚
â”‚    â†’ DB ì„œë²„ í™•ì¸                                         â”‚
â”‚                                                          â”‚
â”‚ 5. NoSuchElementException                                â”‚
â”‚    â†’ UserMapper ì„¤ì • í™•ì¸                                â”‚
â”‚                                                          â”‚
â”‚ 6. JWT generation failed                                 â”‚
â”‚    â†’ JWT secret key í™•ì¸                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ¯ ì£¼ìš” ì‹¤íŒ¨ ì§€ì  ìš”ì•½
1. Google ë¡œê·¸ì¸ ë‹¨ê³„ ì‹¤íŒ¨
ì›ì¸: ì‚¬ìš©ìê°€ ì·¨ì†Œ, ê¶Œí•œ ê±°ë¶€
ì²˜ë¦¬: OAuth2AuthenticationFailureHandler
ê²°ê³¼: /oauth2/redirect?error=access_denied
2. Token êµí™˜ ì‹¤íŒ¨
ì›ì¸: Invalid code, Expired code, Network error
ì²˜ë¦¬: OAuth2AuthenticationFailureHandler
ê²°ê³¼: /oauth2/redirect?error=invalid_grant
3. ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨
ì›ì¸: Google API ì—ëŸ¬, Network timeout
ì²˜ë¦¬: OAuth2AuthenticationFailureHandler
ê²°ê³¼: /oauth2/redirect?error=server_error
4. DB ì²˜ë¦¬ ì‹¤íŒ¨
ì›ì¸: Connection error, Constraint violation, NoSuchElementException
ì²˜ë¦¬: CustomUserServiceì—ì„œ RuntimeException
ê²°ê³¼: OAuth2AuthenticationFailureHandler â†’ /oauth2/redirect?error=...
5. JWT ìƒì„± ì‹¤íŒ¨
ì›ì¸: Invalid secret key, Encoding error
ì²˜ë¦¬: OAuth2AuthenticationSuccessHandlerì—ì„œ ì˜ˆì™¸
ê²°ê³¼: /oauth2/redirect?error=token_generation_failed